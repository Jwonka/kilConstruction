---
import "../styles/global.css";
import "../styles/admin.css";

import logo from "../assets/og-image_1200x630.jpg";
interface Props {
    title?: string;
    description?: string;
    image?: string;
    url?: string;
}

const {
    title = "Admin",
    description = "KIL Construction admin dashboard.",
    image = logo.src,
    url, // optional override
} = Astro.props;

const canonicalUrl = Astro.site
    ? new URL(Astro.url.pathname, Astro.site).toString()
    : (Astro.url ? Astro.url.origin + Astro.url.pathname : "https://kilcon.work/admin");

const pageUrl = typeof url === "string" && url.length > 0 ? url : canonicalUrl;

const absoluteImage = image.startsWith("http")
    ? image
    : new URL(image, pageUrl).toString();
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{title} | KIL Construction</title>
    <meta name="description" content={description} />

    <!-- Prevent admin pages from being indexed -->
    <meta name="robots" content="noindex, nofollow" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={absoluteImage} />
    <meta property="og:url" content={pageUrl} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={absoluteImage} />

    <!-- Canonical -->
    <link rel="canonical" href={pageUrl} />

    <!-- Favicon to match rest of site -->
    <link rel="icon" href={logo.src} />
</head>
<body class="admin-body">
<div class="admin-shell">
    <header class="admin-header">
        <div class="admin-header-inner">
            <a href="/admin/dashboard" class="admin-brand">
                <img
                    src={logo.src}
                    alt="KIL Construction logo"
                    class="admin-logo-img"
                    loading="lazy"
                    decoding="async"
                />
                <span class="admin-brand-main">
                    <span class="admin-brand-text">KIL Construction</span>
                    <span class="admin-tag">Admin</span>
                </span>
            </a>
            <a href="/" class="admin-header-link admin-header-link--back">‚Üê Back to site</a>
        </div>
    </header>

    <main class="admin-main">
        <div class="admin-card">
            <slot />
        </div>
    </main>
    <footer class="admin-footer">
        <div class="admin-footer-inner">
            <div class="admin-footer-textwrap">
                <p class="admin-footer-text">Admin access for KIL Construction.</p>
                <p class="admin-footer-text">Keep this page private.</p>
            </div>

            <a href="/admin/logout" class="admin-header-link admin-footer-logout">Logout</a>
        </div>
    </footer>
</div>
</body>
</html>

