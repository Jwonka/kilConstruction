---
import AdminLayout from "../../layout/AdminLayout.astro";

const cookies = Astro.cookies;
const auth = cookies.get("admin_auth")?.value || "";
const env = (Astro.locals as any).runtime?.env ?? {};
const ADMIN_SECRET = env.ADMIN_SECRET;

if (!ADMIN_SECRET || auth !== ADMIN_SECRET) {
    return new Response(null, {
        status: 302,
        headers: { Location: "/admin" },
    });
}
---
<AdminLayout title="Admin Dashboard">
    <h1 class="admin-title">Admin Dashboard</h1>

    <nav class="admin-actions">
        <a href="/admin/upload" class="btn admin-btn">
            <span class="icon" aria-hidden="true">üì§</span>
            <span>Upload Images</span>
        </a>

        <a href="/admin/manage" class="btn admin-btn">
            <span class="icon" aria-hidden="true">üìÅ</span>
            <span>Manage Uploaded Files</span>
        </a>

        <a href="/admin/reviews" class="btn admin-btn">
            <span class="icon" aria-hidden="true">üìù</span>
            <span>Moderate Reviews</span>
        </a>
    </nav>
</AdminLayout>
<style>
    .admin-title {
        margin: 0 0 24px;
        font-size: clamp(1.9rem, 2.2vw, 2.3rem);
        text-align: center;
        color: var(--ink, #111827);
    }

    .admin-actions a {
        margin: 20px;
    }

    @media (max-width: 700px) {
        .admin-main {
            padding: 1rem 1rem 1.5rem;
        }

        .admin-card {
            border-radius: 22px;
            margin-top: 0.5rem;
        }

        .admin-actions a {
            margin-bottom: 20px;
        }
    }
</style>